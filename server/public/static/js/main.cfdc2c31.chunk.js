(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),o=a.n(l),s=(a(60),a(7)),c=a(12),i=a(14),m=a(13),u=a(11),p=(a(61),a(62),a(23)),h=a.n(p),d=function e(){var t=this;Object(s.a)(this,e),this.signup=function(e){var a=e.username,n=e.email,r=e.password,l=e.favoriteGenre,o=e.profilePic;return t.service.post("/user/signup",{username:a,email:n,password:r,favoriteGenre:l,profilePic:o})},this.login=function(e){var a=e.username,n=e.password;return t.service.post("/user/login",{username:a,password:n})},this.logout=function(){return t.service.post("/user/logout")},this.isLoggedIn=function(){return t.service.get("/user/loggedin")},this.userProfile=function(e){var a=e.id;return t.service.get("/user/".concat(a))},this.service=h.a.create({baseURL:"https://the-underground.herokuapp.com/api",withCredentials:!0})},g=a(8),E=(a(80),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"main-wrapper"},r.a.createElement("aside",null,r.a.createElement("h1",{className:"the",style:{marginRight:"10px"}},"THE")),r.a.createElement("main",null,r.a.createElement("h1",{className:"underground"},"UNDERGROUND"),r.a.createElement("div",{className:"sign-log"},r.a.createElement(g.b,{to:"/signup"},"Join"),r.a.createElement(g.b,{to:"/login"},"Login")))),r.a.createElement("section",null,r.a.createElement("div",{className:"scroll text"},r.a.createElement("div",null,"a writting and content creator platform - a writting and content creator platform - a writting and content creator plat"))))}),f=a(20),v=a(10),b=a(2),y=a(16),C=a(24),N=a(9),I=a(17),w=(a(86),function e(){var t=this;Object(s.a)(this,e),this.handleUpload=function(e){return t.service.post("/files/upload/",e)},this.handleUploadProfilePic=function(e){return t.service.post("/files/uploadProfilePic/",e)},this.handleUploadAudio=function(e){return t.service.post("/files/uploadAudio",e)},this.service=h.a.create({baseURL:"https://the-underground.herokuapp.com/api"})}),S=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(v.a)({},n.state.loginInfo),a=e.target,r=a.name,l=a.value;t=Object(v.a)(Object(v.a)({},t),{},Object(f.a)({},r,l)),n.setState({loginInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.signup(n.state.loginInfo).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/profile")})).catch((function(e){return console.log(e)}))},n.handleFileUpload=function(e){var t=new FormData;t.append("profilePic",e.target.files[0]),n.profilePicService.handleUploadProfilePic(t).then((function(e){console.log("El archivo ya se ha subido. La URL de cloudinary es: ",e.data.secure_url);var t=Object(v.a)({},n.state.loginInfo);t=Object(v.a)(Object(v.a)({},t),{},{profilePic:e.data.secure_url}),console.log(t),n.setState({loginInfo:t})})).catch((function(e){return console.log(e)}))},n.state={loginInfo:{username:"",email:"",password:"",favoriteGenre:"",profilePic:""},errorMessage:""},n.authService=new d,n.profilePicService=new w,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"signup"},r.a.createElement(I.a,null,r.a.createElement(N.a,{className:"join-the",md:6},r.a.createElement("div",{className:"title-form"},r.a.createElement("h1",null,"JOIN ",r.a.createElement("br",null)," THE ",r.a.createElement("br",null),"HOOD")),r.a.createElement("p",{style:{fontSize:"20px",marginTop:"-30px"}},"ALREADY HAVE AN ACCOUNT? ",r.a.createElement(g.b,{style:{color:"#f9f9f9"},to:"/login"},"LOGIN"))),r.a.createElement(N.a,{className:"sign-form",md:6},r.a.createElement(b.a,{onSubmit:this.handleSubmit,className:"join-form"},r.a.createElement(b.a.Group,{controlId:"name"},r.a.createElement(b.a.Label,{className:"inputname"},"Username"),r.a.createElement(b.a.Control,{className:"inputform",name:"username",type:"text",value:this.state.username,onChange:this.handleInputChange})),r.a.createElement(b.a.Group,{controlId:"email"},r.a.createElement(b.a.Label,{className:"inputname"},"Email"),r.a.createElement(b.a.Control,{className:"inputform",name:"email",type:"text",value:this.state.email,onChange:this.handleInputChange})),r.a.createElement(b.a.Group,{controlId:"pwd"},r.a.createElement(b.a.Label,{className:"inputname"},"Password"),r.a.createElement(b.a.Control,{className:"inputform",name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement(b.a.Group,{controlId:"favoriteGenre"},r.a.createElement(b.a.Label,{className:"inputname"},"Favorite genre"),r.a.createElement(b.a.Group,{className:"genres",name:" favoriteGenre",value:this.state.favoriteGenre,onChange:this.handleInputChange},r.a.createElement(b.a.Control,{as:"select",multiple:!0,name:"favoriteGenre"},r.a.createElement("option",null,"Narrative"),r.a.createElement("option",null,"NonFiction"),r.a.createElement("option",null,"Poetry")))),r.a.createElement(b.a.Group,{controlId:"cover"},r.a.createElement(b.a.Label,null,"Choose your profile pic"),r.a.createElement(b.a.Control,{name:"cover",type:"file",onChange:this.handleFileUpload})),r.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),r.a.createElement(y.a,{className:"boton",type:"submit"},"Join"))))))}}]),a}(n.Component),O=(a(88),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(v.a)({},n.state.loginInfo),a=e.target,r=a.name,l=a.value;t=Object(v.a)(Object(v.a)({},t),{},Object(f.a)({},r,l)),n.setState({loginInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.login(n.state.loginInfo).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/profile")})).catch((function(e){return console.log(e)}))},n.state={loginInfo:{username:"",password:""},errorMessage:""},n.authService=new d,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"joinform-dos"},r.a.createElement(I.a,null,r.a.createElement(N.a,{className:"sign-form",md:6},r.a.createElement(b.a,{onSubmit:this.handleSubmit},r.a.createElement(b.a.Group,{controlId:"name"},r.a.createElement(b.a.Label,{className:"inputname"},"Username"),r.a.createElement(b.a.Control,{className:"inputform",name:"username",type:"text",value:this.state.username,onChange:this.handleInputChange})),r.a.createElement(b.a.Group,{controlId:"pwd"},r.a.createElement(b.a.Label,{className:"inputname"},"Password"),r.a.createElement(b.a.Control,{className:"inputform",name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),r.a.createElement(y.a,{className:"boton",type:"submit"},"Login"))),r.a.createElement(N.a,{className:"join-the",md:6},r.a.createElement("h1",null,"LOGIN"),r.a.createElement("p",{style:{fontSize:"20px",marginTop:"-30px"}},"WE KNOW YOU'RE SUCH A GOOD WRITER")))))}}]),a}(n.Component)),P=function e(){var t=this;Object(s.a)(this,e),this.getPosts=function(){return t.service.get("/post/allPosts")},this.getUserPost=function(e){return t.service.get("/post/detail/".concat(e))},this.getAllUserPosts=function(e){return t.service.get("/post/allUserPosts/".concat(e))},this.createPost=function(e){return t.service.post("/post/newPost",e)},this.deletePost=function(e){return t.service.get("/post/deletePost/".concat(e))},this.editPost=function(e,a){return t.service.post("/post/editPost/".concat(e),a)},this.likePost=function(e){return t.service.post("/post/likePost/",e)},this.service=h.a.create({baseURL:"https://the-underground.herokuapp.com/api"})},j=(a(89),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).displayPosts=function(){return n.state.posts.map((function(e,t){return r.a.createElement(g.b,{to:"/post/detail/".concat(e._id),className:"link-posts",key:t},r.a.createElement("li",null,e.title," ",r.a.createElement("br",null)," ",r.a.createElement("p",{className:"p-profile",style:{color:"#706a94",fontSize:"10px"}},e.genre)))}))},n.displayLikedPosts=function(){return n.state.likes.map((function(e,t){return r.a.createElement(g.b,{to:"/post/detail/".concat(e._id),className:"link-posts",key:t},r.a.createElement("li",null,e.title))}))},n.componentDidMount=function(){n.postService.getAllUserPosts(n.state.user._id).then((function(e){n.setState({posts:e.data.userPosts,likes:e.data.likedPosts})})).catch((function(e){return console.log(e)}))},n.postService=new P,n.state={user:e.loggedInUser,posts:[],likes:[]},n}return Object(c.a)(a,[{key:"render",value:function(){return this.state.user?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"title-profile"},r.a.createElement("h4",{style:{fontSize:"35px"}},"Posts you've done",r.a.createElement("img",{style:{width:"30px",marginLeft:"20px"},src:"/images/grey-pen.png",alt:"LikeIcon"}))),r.a.createElement("div",{className:"post-list"},r.a.createElement("p",null,this.displayPosts()))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"title-profile"},r.a.createElement("h4",{style:{fontSize:"35px"}},"Liked posts",r.a.createElement("img",{style:{width:"25px",marginLeft:"20px"},src:"/images/grey-heart.png",alt:"LikeIcon"}))),r.a.createElement("div",{className:"post-list"},r.a.createElement("p",null,this.displayLikedPosts()))))):r.a.createElement("p",null,"Charging...")}}]),a}(n.Component)),U=a(26),x=a(31),k=a.n(x),L=a(46),D=a(47),F=a.n(D),G=(a(93),a(94),a(48)),T=a.n(G),_=(a(105),a(49)),A=a.n(_),R=a(50),M=a.n(R),B=(a(106),a(107),a(51)),W=a.n(B),H=(a(108),a(52)),z=a.n(H),V=(a(109),a(110),a(53)),J=a.n(V),Y=(a(111),{marker:z.a,list:T.a,code:A.a,linkTool:M.a,header:W.a,inlineCode:J.a}),K=function(e){var t=e.savePost,a=e.postContent,n=r.a.useRef(null);function l(){return(l=Object(L.a)(k.a.mark((function e(a){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,n.current.save();case 3:r=e.sent,console.log("savedData",r),t(r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{instanceRef:function(e){return n.current=e},tools:Y,data:a||{time:1556098174501,blocks:[{type:"paragraph",data:{text:"Write a paragraph!"}},{type:"paragraph",data:{text:"Write another paragraph"}},{type:"header",data:{text:"You can write a title too",level:3}},{type:"list",data:{style:"unordered",items:["Add","A","List","Here."]}},{type:"paragraph",data:{text:"And... another paragraph"}}],version:"2.12.4"}}),r.a.createElement("button",{style:{color:"white"},onClick:function(e){return function(e){return l.apply(this,arguments)}(e)}},"Save!"))},q=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(f.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault(),n.newPostService.editPost(n.props._id,n.state).then((function(){return n.props.finishPost()})).catch((function(e){return console.log(e)}))},n.handlePostContent=function(e){n.setState(Object(v.a)(Object(v.a)({},n.state),{},{content:e}))},n.handleFileUpload=function(e){var t=new FormData;t.append("cover",e.target.files[0]),n.coverService.handleUpload(t).then((function(e){console.log("El archivo ya se ha subido. La URL de cloudinary es: ",e.data.secure_url),n.setState(Object(v.a)(Object(v.a)({},n.state),{},{cover:e.data.secure_url}))})).catch((function(e){return console.log(e)}))},n.state={title:n.props.title,content:n.props.content,genre:"Narrative",typology:"Descriptive",cover:n.props.cover,redirect:!1},n.newPostService=new P,n.coverService=new w,n}return Object(c.a)(a,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(u.a,{to:"/profile"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"edit-post"},r.a.createElement("h1",{className:"title"},"Edit"),r.a.createElement(b.a,{onSubmit:this.handleSubmit},r.a.createElement(b.a.Group,{as:I.a,controlId:"title"},r.a.createElement(N.a,{sm:10},r.a.createElement(b.a.Control,{name:"title",placeholder:"Title",type:"text",value:this.state.title,onChange:this.handleInputChange}))),r.a.createElement(b.a.Group,{as:I.a,controlId:"content"},r.a.createElement(N.a,{sm:10},r.a.createElement(K,{savePost:this.handlePostContent,postContent:this.state.content}))),r.a.createElement(b.a.Group,{as:I.a,controlId:"genre"},r.a.createElement(N.a,{sm:10},r.a.createElement(b.a.Label,null,"Choose genre"),r.a.createElement(b.a.Control,{as:"select",name:"genre",value:this.state.genre,onChange:this.handleInputChange},r.a.createElement("option",null,"Narrative"),r.a.createElement("option",null,"NonFiction"),r.a.createElement("option",null,"Poetry")))),r.a.createElement(b.a.Group,{as:I.a,controlId:""},r.a.createElement(N.a,{sm:10},r.a.createElement(b.a.Label,null,"Choose typology"),r.a.createElement(b.a.Control,{as:"select",name:"typology",value:this.state.typology,onChange:this.handleInputChange},r.a.createElement("option",null,"Descriptive"),r.a.createElement("option",null,"Narrative"),r.a.createElement("option",null,"Expository"),r.a.createElement("option",null,"Argumentative"),r.a.createElement("option",null,"Literature")))),r.a.createElement(b.a.Group,{controlId:"cover"},r.a.createElement(b.a.Label,null,"Choose your cover"),r.a.createElement(b.a.Control,{name:"cover",type:"file",onChange:this.handleFileUpload})),r.a.createElement(y.a,{className:"boton",type:"submit"},"Update"))))}}]),a}(n.Component),Q=(a(112),function(e){var t=e.isCreator,a=e.review,n=e.handleDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"comment-style"},r.a.createElement(N.a,{md:{span:8,offset:1}},r.a.createElement("b",null,a.creator.username)),r.a.createElement(N.a,{md:{span:8,offset:1},className:"comment"},a.content),r.a.createElement(N.a,{md:{span:8,offset:1},className:"rating-info"},r.a.createElement("img",{style:{width:"13px",marginRight:"5px",marginBottom:"3px"},src:"/images/star-icon.png",alt:"RateIcon"}),a.rating),t&&r.a.createElement(N.a,{md:{span:8,offset:1},className:"comment"},r.a.createElement("button",{style:{marginTop:"20px"},className:"boton",onClick:function(){return n(a._id)}},"Delete"))),r.a.createElement("hr",null))}),X=function e(){var t=this;Object(s.a)(this,e),this.addComment=function(e){return t.service.post("/comment/new",e)},this.deleteComment=function(e){return t.service.get("/comment/deleteComment/".concat(e))},this.service=h.a.create({baseURL:"https://the-underground.herokuapp.com/api"})},Z=(a(113),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(f.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=Object(v.a)({},n.state);t.user=n.props.user._id,t.post=n.props.post,n.commentService.addComment(t).then((function(e){n.setState({content:"",rating:""}),n.props.newCommentAdded()})).catch((function(e){return console.log(e)}))},n.state={content:"",rating:""},n.commentService=new X,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"comment-form"},r.a.createElement(b.a,{className:"comment-form",onSubmit:this.handleSubmit},r.a.createElement(b.a.Group,{controlId:"exampleForm.ControlTextarea1"},r.a.createElement(b.a.Control,{placeholder:"Write your comment",as:"textarea",rows:"3",name:"content",value:this.state.content,onChange:this.handleInputChange})),r.a.createElement(b.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(b.a.Label,null,"Rate the post"),r.a.createElement(b.a.Control,{as:"select",name:"rating",value:this.state.rating,onChange:this.handleInputChange},r.a.createElement("option",null,"1"),r.a.createElement("option",null,"2"),r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4"),r.a.createElement("option",null,"5"))),r.a.createElement("button",{className:"boton",type:"submit"},"Add"))))}}]),a}(n.Component)),$=(a(114),a(32)),ee=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).displayThePost=function(){var e=n.props.match.params.id;n.postService.getUserPost(e).then((function(e){return n.setState(e.data)})).catch((function(e){return console.log(e)}))},n.displayComment=function(){return n.state.comments.map((function(e){return r.a.createElement(Q,{isCreator:e.creator._id===n.props.loggedInUser._id,handleDelete:function(e){return n.deleteComment(e)},key:e._id,review:e})}))},n.handleDelete=function(e){n.postService.deletePost(e).then((function(){n.props.history.push("/profile")})).catch((function(e){return console.log(e)}))},n.deleteComment=function(e){n.commentService.deleteComment(e).then((function(e){return n.displayThePost()})).catch((function(e){return console.log(e)}))},n.showModal=function(){return n.setState({modalShow:!0})},n.hideModal=function(){return n.setState({modalShow:!1})},n.componentDidMount=function(){n.displayThePost()},n.finishPost=function(){n.hideModal(!1),n.displayThePost()},n.submitLike=function(e){console.log("ha entrado en submit"),e.preventDefault();var t={user:n.props.loggedInUser._id,post:n.state._id};n.postService.likePost(t).then((function(){return console.log("DONE")})).catch((function(e){return console.log(e)}))},n.state={postInfo:{},showModal:!1,comments:[]},n.postService=new P,n.commentService=new X,n.goBack=n.goBack.bind(Object(U.a)(n)),n}return Object(c.a)(a,[{key:"goBack",value:function(){this.props.history.goBack()}},{key:"handleNewComment",value:function(){this.displayThePost()}},{key:"render",value:function(){var e=this;return this.state.creatorID?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"post-details"},r.a.createElement($.a,{show:this.state.modalShow,onHide:this.hideModal},r.a.createElement($.a.Body,null,r.a.createElement(q,Object.assign({},this.state,{finishPost:this.finishPost,hideModalWindow:this.hideModal})))),r.a.createElement("div",{className:"main-text"},r.a.createElement(g.b,{onClick:this.goBack}," ",r.a.createElement("img",{style:{width:"15px",marginBottom:"20px"},src:"/images/left-arrow.png",alt:""})," "),r.a.createElement("p",null," Written by: ",this.state.creatorID?r.a.createElement("h6",null,this.state.creatorID.username):null),r.a.createElement("h2",{className:"post-title"},this.state.title),r.a.createElement("div",{className:"genre-typo",style:{display:"inline-flex"}},r.a.createElement("p",{className:"genre-genre"},r.a.createElement("b",null,"Genre:")," ",this.state.genre),r.a.createElement("p",{className:"genre-genre"},r.a.createElement("b",null,"Typology:")," ",this.state.typology)),this.state.cover&&r.a.createElement("div",{className:"cover-image"},r.a.createElement("img",{style:{width:"500px",margin:"2%"},src:this.state.cover,alt:this.state.title})),r.a.createElement("p",{className:"content-box"},this.state.content.blocks.map((function(e){return"header"===e.type?r.a.createElement("h4",null,e.data.text):"paragraph"===e.type?r.a.createElement("p",null,e.data.text):"list"===e.type?r.a.createElement("ul",null,e.data.items.map((function(e){return r.a.createElement("li",null,e)}))):void 0}))),this.state.creatorID._id===this.props.loggedInUser._id?r.a.createElement("div",{className:"buttons-post"},r.a.createElement(y.a,{className:"boton",onClick:function(){return e.handleDelete(e.state._id)}},"Delete"),r.a.createElement(y.a,{className:"boton",onClick:this.showModal},"Update")):r.a.createElement(g.b,{onClick:this.submitLike},r.a.createElement("img",{style:{width:"15px"},src:"/images/grey-heart.png",alt:"LikeIcon"}))),r.a.createElement("div",{className:"main-image"},r.a.createElement("h2",null,"Comments"),this.state&&this.displayComment(),this.state.creatorID._id===this.props.loggedInUser._id?null:r.a.createElement("div",null,r.a.createElement(Z,{user:this.props.loggedInUser,post:this.state._id,newCommentAdded:function(){return e.handleNewComment()}}))))):r.a.createElement("h1",null)}}]),a}(n.Component),te=(a(115),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).logout=function(){n.props.setTheUser(!1),n.authService.logout()},n.authService=new d,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-nav"},r.a.createElement("nav",{className:"nav-items"},r.a.createElement("ul",null,this.props.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{style:{width:"100px",borderRadius:"50px"},src:this.props.loggedInUser.profilePic,alt:""}),r.a.createElement("p",{className:"hi-username"},"Hi, ",this.props.loggedInUser.username),r.a.createElement("br",null),r.a.createElement(g.b,{className:"a-main",to:"/explore"},"Explore ",r.a.createElement("img",{style:{width:"20px"},src:"/images/lupa.png",alt:""})),r.a.createElement(g.b,{className:"a-main",to:"/profile"},"Profile ",r.a.createElement("img",{style:{width:"20px"},src:"/images/user.png",alt:""})),r.a.createElement(g.b,{className:"a-main",to:"/post/new"},"New Post ",r.a.createElement("img",{style:{width:"22px"},src:"/images/grey-pen.png",alt:""})),r.a.createElement(g.b,{style:{fontSize:"15px"},to:"/",as:"div",onClick:this.logout},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.b,{to:"/login"},"Login"),r.a.createElement(g.b,{to:"/signup"},"Sign up")))))}}]),a}(n.Component)),ae=(a(116),function(e){return r.a.createElement("div",{className:"card-post"},r.a.createElement("h4",{style:{textAlign:"left",fontSize:"25px",color:"#7a7499"}},e.title),r.a.createElement("div",{className:"yay"},"Written by: ",r.a.createElement("br",null),r.a.createElement("p",{style:{fontSize:"15px"}},r.a.createElement("b",null,e.creatorID.username))),r.a.createElement("div",{className:"card-link"},r.a.createElement(g.b,{to:"/post/detail/".concat(e._id)},"READ")))}),ne=(a(117),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).displayPosts=function(){return n.state.filteredPosts.map((function(e){return r.a.createElement(ae,Object.assign({key:e._id},e))}))},n.displayAllPosts=function(){n.postService.getPosts().then((function(e){return n.setState({posts:e.data,filteredPosts:e.data})})).catch((function(e){return console.log(e)}))},n.componentDidMount=function(){n.displayAllPosts()},n.filterSearch=function(){var e=n.state.posts.filter((function(e){return e.genre.includes(n.state.genreValue)})).filter((function(e){return e.typology.includes(n.state.typologyValue)}));n.setState({filteredPosts:e})},n.handleFilterByGenre=function(e){var t=e.currentTarget.value;n.setState({genreValue:t},(function(){return n.filterSearch()}))},n.handleFilterByTypology=function(e){var t=e.currentTarget.value;n.setState({typologyValue:t},(function(){return n.filterSearch()}))},n.randomPost=function(){var e=Math.floor(Math.random()*n.state.filteredPosts.length),t=n.state.filteredPosts[e];n.props.history.push("post/detail/".concat(t._id))},n.state={posts:[],filteredPosts:[],genreValue:"",typologyValue:"",randomChoice:{}},n.postService=new P,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginLeft:"18%"},className:"row"},r.a.createElement("div",{className:"filters"},r.a.createElement("div",{className:"col-3"},r.a.createElement(b.a,null,r.a.createElement(b.a.Group,{controlId:"exampleForm.SelectCustom"},r.a.createElement(b.a.Label,null,"Choose by genre"),r.a.createElement(b.a.Control,{onChange:this.handleFilterByGenre,as:"select",style:{width:"200px"},custom:!0},r.a.createElement("option",{value:"Narrative"},"Narrative"),r.a.createElement("option",{value:"NonFiction"},"NonFiction"),r.a.createElement("option",{value:"Poetry"},"Poetry"))))),r.a.createElement("div",{className:"col-3"},r.a.createElement(b.a,null,r.a.createElement(b.a.Group,{controlId:"exampleForm.SelectCustom"},r.a.createElement(b.a.Label,{style:{textAlign:"center"}},"Choose by typology"),r.a.createElement(b.a.Control,{onChange:this.handleFilterByTypology,as:"select",style:{width:"200px"},custom:!0},r.a.createElement("option",{value:"Descriptive"},"Descriptive"),r.a.createElement("option",{value:"Narrative"},"Narrative"),r.a.createElement("option",{value:"Expository"},"Expository"),r.a.createElement("option",{value:"Argumentative"},"Argumentative"),r.a.createElement("option",{value:"Literature"},"Literature"))))),r.a.createElement("div",{className:"col-4"},r.a.createElement("p",null,"Don't know what to read?")," ",r.a.createElement("br",null)," ",r.a.createElement(y.a,{onClick:this.randomPost,className:"boton",style:{marginTop:"-50px",marginLeft:"30px"}},"CLICK HERE")))),r.a.createElement("div",{className:"posts-wrapper"},this.displayPosts()))}}]),a}(n.Component)),re=(a(118),a(54)),le=(new(a.n(re).a)({bitRate:128}),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(f.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=Object(v.a)({},e.state);a.user=e.props.user._id,e.newPostService.createPost(a).then((function(t){!0===t.data.create&&e.setState({redirect:!0})})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){var a=new FormData;a.append("cover",t.target.files[0]),e.coverService.handleUpload(a).then((function(t){console.log("El archivo ya se ha subido. La URL de cloudinary es: ",t.data.secure_url),e.setState(Object(v.a)(Object(v.a)({},e.state),{},{cover:t.data.secure_url}))})).catch((function(e){return console.log(e)}))},e.state={title:"",content:"",genre:"Narrative",typology:"Descriptive",cover:"",redirect:!1,audio:""},e.newPostService=new P,e.coverService=new w,e}return Object(c.a)(a,[{key:"handlePostContent",value:function(e){this.setState({content:e})}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(u.a,{to:"/profile"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"newpost"},r.a.createElement("h1",{className:"title"},"Write your thoughts down here"),r.a.createElement(b.a,{onSubmit:this.handleSubmit},r.a.createElement(b.a.Group,{as:I.a,controlId:"title"},r.a.createElement(N.a,{sm:10},r.a.createElement(b.a.Control,{name:"title",placeholder:"Title",type:"text",value:this.state.title,onChange:this.handleInputChange}))),r.a.createElement(b.a.Group,{as:I.a,controlId:"content"},r.a.createElement(N.a,{sm:10},r.a.createElement(K,{savePost:function(t){return e.handlePostContent(t)}}))),r.a.createElement(b.a.Group,{as:I.a,controlId:"genre"},r.a.createElement(N.a,{sm:10},r.a.createElement(b.a.Label,null,"Choose genre"),r.a.createElement(b.a.Control,{as:"select",name:"genre",value:this.state.genre,onChange:this.handleInputChange},r.a.createElement("option",null,"Narrative"),r.a.createElement("option",null,"NonFiction"),r.a.createElement("option",null,"Poetry")))),r.a.createElement(b.a.Group,{as:I.a,controlId:""},r.a.createElement(N.a,{sm:10},r.a.createElement(b.a.Label,null,"Choose typology"),r.a.createElement(b.a.Control,{as:"select",name:"typology",value:this.state.typology,onChange:this.handleInputChange},r.a.createElement("option",null,"Descriptive"),r.a.createElement("option",null,"Narrative"),r.a.createElement("option",null,"Expository"),r.a.createElement("option",null,"Argumentative"),r.a.createElement("option",null,"Literature")))),r.a.createElement(b.a.Group,{controlId:"cover"},r.a.createElement(b.a.Label,null,"Choose your cover"),r.a.createElement(b.a.Control,{name:"cover",type:"file",onChange:this.handleFileUpload})),r.a.createElement("br",null),r.a.createElement(y.a,{className:"boton",type:"submit"},"Publish"))))}}]),a}(n.Component)),oe=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).setTheUser=function(t){return e.setState({loggedInUser:t})},e.fetchUser=function(){null===e.state.loggedInUser&&e.authService.isLoggedIn().then((function(t){return e.setTheUser(t.data)})).catch((function(){return e.setTheUser(!1)}))},e.state={loggedInUser:null},e.authService=new d,e.fetchUser(),e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.state.loggedInUser?r.a.createElement("div",{className:"general-wrapper"},r.a.createElement(te,{loggedInUser:this.state.loggedInUser,setTheUser:this.setTheUser}),r.a.createElement("div",{className:"main-container"},r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/profile",render:function(){return e.state.loggedInUser?r.a.createElement(j,{loggedInUser:e.state.loggedInUser}):r.a.createElement(u.a,{to:"/"})}}),r.a.createElement(u.b,{path:"/post/detail/:id",render:function(t){return r.a.createElement(ee,Object.assign({},t,{loggedInUser:e.state.loggedInUser}))}}),r.a.createElement(u.b,{path:"/explore",render:function(e){return r.a.createElement(ne,e)}}),r.a.createElement(u.b,{path:"/post/new",exact:!0,render:function(){return r.a.createElement(le,{user:e.state.loggedInUser})}}),r.a.createElement(u.b,{path:"/post/detail/:id/edit",exact:!0,render:function(){return r.a.createElement(q,{user:e.state.loggedInUser})}}),r.a.createElement(u.b,{path:"/editorTest",render:function(e){return r.a.createElement(K,e)}})))):r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",render:function(){return r.a.createElement(E,null)}}),r.a.createElement(u.b,{path:"/signup",render:function(t){return r.a.createElement(S,Object.assign({},t,{setTheUser:e.setTheUser}))}}),r.a.createElement(u.b,{path:"/login",render:function(t){return r.a.createElement(O,Object.assign({},t,{setTheUser:e.setTheUser}))}}))}}]),a}(n.Component);o.a.render(r.a.createElement(g.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null))),document.getElementById("root"))},55:function(e,t,a){e.exports=a(119)},60:function(e,t,a){},62:function(e,t,a){},80:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){}},[[55,1,2]]]);
//# sourceMappingURL=main.cfdc2c31.chunk.js.map